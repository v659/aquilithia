{% extends "base.html" %}

{% block title %}Aqualithia - General Overview{% endblock %}

{% block content %}
<h1>🏛️ General Overview</h1>

<!-- General Info -->
<section>
    <h2>General Info</h2>
    <ul>
        <li><strong>Name:</strong> The Sovereign Ceremonial Republic of Aqualithia</li>
        <li><strong>Type:</strong> Micronation with symbolic sovereignty, rooted in creative governance and ceremonial bureaucracy</li>
        <li><strong>Founded:</strong> 26th May 2025</li>
        <li><strong>Purpose:</strong> Celebrate imaginative statecraft, ritualized administration, and playful diplomacy</li>
        <li><strong>Recognition:</strong> Operates symbolically within its host nation</li>
    </ul>
</section>

<hr>

<!-- Location -->
<section>
    <h2>📍 Location</h2>
    <ul>
        <li><strong>Territory:</strong> Privately owned residence within a gated community in the USA</li>
        <li><strong>Status:</strong> Non-contiguous, ceremonial territory</li>
        <li><strong>Map:</strong> Optional stylized map showing ministries, embassies, and borders of imagination</li>
        <li><strong>Access:</strong> Virtual citizenship and diplomatic engagement encouraged</li>
    </ul>
</section>

<hr>

<!-- Motto & Identity -->
<section>
    <h2>💬 Motto & Identity</h2>
    <ul>
        <li>“Precision in Whimsy, Sovereignty in Spirit”</li>
        <li>“Where Ceremony Meets Reality”</li>
        <li>“Aqualithia: Governed by Imagination”</li>
    </ul>
</section>

<hr>

<!-- Economy -->
<section>
    <h2>💰 Economy</h2>
    <ul>
        <li><strong>Currency:</strong> PUFB (Pufferbucks)</li>
        <li><strong>Peg System:</strong> Ceremonially pegged</li>
        <li><strong>GDP:</strong> 570,000 PUFB, 350,000 USD</li>
        <li><strong>Taxation:</strong> 0% + 5% VAT</li>
        <li><strong>Institutions:</strong> Aqualithian Central Bank, Puffer Mail</li>
        <li><strong>Digital Infrastructure:</strong> E-banking, ceremonial checks, budget dashboards</li>
    </ul>
</section>

<hr>

<!-- Government & Roles -->
<section>
    <h2>🧑‍⚖️ Government & Roles</h2>
    <ul>
        <li><strong>Structure:</strong> Democracy</li>
        <li><strong>Key Roles:</strong>
            <ul>
                <li>Sovereign: Head of state (active)</li>
                <li>Ministers: Economy, Culture, Diplomacy, Rituals, etc.</li>
                <li>Citizens: Rights, duties, ceremonial titles</li>
            </ul>
        </li>
        <li><strong>Election or Appointment:</strong> By vote</li>
    </ul>
</section>

<hr>

<!-- Culture & Rituals -->
<section>
    <h2>📜 Culture & Rituals</h2>
    <ul>
        <li><strong>Ceremonies:</strong> Budget Day, Treaty Signing, Citizen Induction</li>
        <li><strong>Documents:</strong> Official checks, proclamations, ID cards</li>
        <li><strong>Holidays:</strong> Founding Day, Sovereignty Week, etc.</li>
    </ul>
</section>

<hr>

<!-- Digital Citizenship -->
<section>
    <h2>🌐 Digital Citizenship</h2>
    <ul>
        <li><strong>Join Aqualithia:</strong> Application form, oath of imagination, digital ID</li>
        <li><strong>Citizen Portal:</strong> Access to banking, ministries, document generators</li>
        <li><strong>Embassies:</strong> Virtual embassies or forums for intermicronational diplomacy</li>
    </ul>
</section>

<hr>

<section id="ai-assistant">
    <h2>🤖 Ask the Aqualithia AI Assistant</h2>
    <div id="ai-form-wrapper">
        <input type="text" id="message" placeholder="Ask a question about Aqualithia..." />
        <button id="ask-btn">Ask</button>
    </div>
    <div id="ai-response"></div>
</section>


<script>
const messageInput = document.getElementById("message");
const askBtn = document.getElementById("ask-btn");
const responseDiv = document.getElementById("ai-response");

async function askAI() {
    const message = messageInput.value.trim();
    if (!message) return;

    responseDiv.innerHTML = "<em>Thinking...</em>";
    askBtn.disabled = true;

    const formData = new FormData();
    formData.append("message", message);

    try {
        const res = await fetch("/ask_ai", {
            method: "POST",
            body: formData
        });
        const data = await res.json();

        console.log("AI Response:", data);
        responseDiv.innerHTML = <strong>AI:</strong> ${data.answer};
        messageInput.value = ""; // clear input
    } catch (err) {
        console.error("Error fetching AI response:", err);
        responseDiv.innerHTML = "<em>Failed to get response. Please try again.</em>";
    } finally {
        askBtn.disabled = false;
    }
}

// Click button
askBtn.addEventListener("click", askAI);

// Press Enter
messageInput.addEventListener("keypress", (e) => {
    if (e.key === "Enter") {
        askAI();
    }
});
</script>

{% endblock %}
